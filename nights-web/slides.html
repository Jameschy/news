<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!--<meta http-equiv="refresh" content="10" />-->
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/>
    <title>Night Share</title>

    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon"/>
    <link rel="stylesheet" href="css/bootstrap.css"/>
    <link rel="stylesheet" href="css/swiper.css"/>
    <link rel="stylesheet" href="css/main-slides.css"/>

    <link rel="stylesheet" href="css/videoslidebox.css">
</head>
<body>

<div class="right-play-box swiper-container">
    <div class="right-video-box swiper-wrapper">
        <div class="swiper-slide op-p6" style="background-image: url(img/list-0.jpg);min-height: -webkit-fill-available;">
            <video class="v-slide" id="vSlide0" src="img/home-bg1.mp4" onended="slideVideoEnd()"></video>
            <ul class="right-btn-box">
                <li class="btn-follow">
                    <a href="details.html" class="blogger-icon">
                        <span class="follow-syb"></span>
                    </a>
                </li>
                <li class="btn-close">
                    <span class="close-syb"></span>
                </li>
            </ul>
            <div class="bottom-brief-box dis-no">
                Test!!!Test!!Test!!Test!!Test!!Test!!
            </div>

            <div class="btn-play"></div>
        </div>
        <div class="swiper-slide op-p6" style="background-image: url(img/list-1.jpg)">
            <video class="v-slide" id="vSlide1" src="img/home-bg1.mp4" onended="slideVideoEnd()"></video>
            <ul class="right-btn-box">
                <li class="btn-follow">
                    <a href="details.html" class="blogger-icon">
                        <span class="follow-syb"></span>
                    </a>
                </li>
                <li class="btn-close">
                    <span class="close-syb"></span>
                </li>
            </ul>
            <div class="bottom-brief-box dis-no">
                Test!!!Test!!Test!!Test!!Test!!Test!!
            </div>

            <div class="btn-play"></div>
        </div>
        <div class="swiper-slide op-p6" style="background-image: url(img/list-2.jpg)">
            <video class="v-slide" id="vSlide2" src="img/home-bg2.mp4" onended="slideVideoEnd()"></video>
            <ul class="right-btn-box">
                <li class="btn-follow">
                    <a href="details.html" class="blogger-icon">
                        <span class="follow-syb"></span>
                    </a>
                </li>
                <li class="btn-close">
                    <span class="close-syb"></span>
                </li>
            </ul>
            <div class="bottom-brief-box dis-no">
                Test!!!Test!!Test!!Test!!Test!!Test!!
            </div>

            <div class="btn-play"></div>
        </div>
        <div class="swiper-slide op-p6" style="background-image: url(img/list-3.jpg)">
            <video class="v-slide" id="vSlide3" src="img/home-bg3.mp4" onended="slideVideoEnd()"></video>
            <ul class="right-btn-box">
                <li class="btn-follow">
                    <a href="details.html" class="blogger-icon">
                        <span class="follow-syb"></span>
                    </a>
                </li>
                <li class="btn-close">
                    <span class="close-syb"></span>
                </li>
            </ul>
            <div class="bottom-brief-box dis-no">
                Test!!!Test!!Test!!Test!!Test!!Test!!
            </div>

            <div class="btn-play"></div>
        </div>
        <div class="swiper-slide op-p6" style="background-image: url(img/list-4.jpg)">
            <video class="v-slide" id="vSlide4" src="img/home-bg4.mp4" onended="slideVideoEnd()"></video>
            <ul class="right-btn-box">
                <li class="btn-follow">
                    <a href="details.html" class="blogger-icon">
                        <span class="follow-syb"></span>
                    </a>
                </li>
                <li class="btn-close">
                    <span class="close-syb"></span>
                </li>
            </ul>
            <div class="bottom-brief-box dis-no">
                Test!!!Test!!Test!!Test!!Test!!Test!!
            </div>

            <div class="btn-play"></div>
        </div>
    </div>
</div>

</body>

<script type="text/javascript" src="js/jquery-3.3.1.js"></script>
<script type="text/javascript" src="js/swiper.js"></script>

<script type="text/javascript">

</script>
<script type="text/javascript">
    $(document).ready(function () {
        // $(".right-play-box").addClass("dis-no");
        $(".v-slide").trigger('pause');

        
        $(".btn-close").click(function () {
            window.history.go(-1);

            // ç‚¹å‡»è§†é¢‘å…³é—­ï¼Œè§†é¢‘ç»ˆæ­¢
            $(".v-slide").trigger('pause');
        })

        $(".swiper-slide").click(function () {
            if ($(this).hasClass("op-p6")) {
                $(this).removeClass("op-p6");
                $(this).find("video").css("visibility","visible");
               $(this).find("video").trigger("play");
                $(".btn-play").addClass('dis-no');
            }else{
                $(this).addClass("op-p6");
                // $(this).find("video").css("visibility","hidden");
                $(this).find("video").trigger("pause");
                console.log("click the video 1")
                $(".btn-play").removeClass('dis-no');
            }
        })
    });

    var swiper = new Swiper('.swiper-container',{
        on: {
            slideChangeTransitionStart: function(){
                $(".v-slide").trigger('pause');
                $(".v-slide").css('visibility',"hidden");
                $(".swiper-slide").removeClass('op-p6');

            },
            slideChangeTransitionEnd: function(){

                var vS= "#vSlide"+this.activeIndex;
                // alert(this.activeIndex);//åˆ‡æ¢ç»“æŸæ—¶ï¼Œå‘Šè¯‰æˆ‘ç°åœ¨æ˜¯ç¬¬å‡ ä¸ªslide
                $(vS).trigger('play');
                $(vS).removeClass('op-p6');
                $(vS).css('visibility',"visible");


                $(".btn-play").addClass('dis-no');
                // $('#vSlide'+this.activeIndex+"'").trigger('play');
                console.log(vS);
                console.log(this.activeIndex);
            },
        },
    });
    // var faceBtn = '.btn-'+index;



    
    function slideVideoEnd() {
        $(".v-slide").css('visibility',"hidden");
        $(".btn-play").removeClass('dis-no');
        $(".swiper-slide").addClass('op-p6');
    }


    // å¯¹è§†é¢‘åœ¨è§†çª—å®¹å™¨ä½ç½®çš„åˆ¤å®š
    function compareImgSize() {
        var coverImg = document.getElementById("bgimg"),
            coverSize = getImgNaturalDimensions(coverImg),

            // è®¡ç®—å®½é«˜æ¯”
            coverSizeRate = coverSize[0] / coverSize[1];

        // å¤šæ¡ä»¶åˆ¤æ–­ç®€å†™
        (coverSizeRate > 1.7 || coverSizeRate == 1.7) ? imgPosition(33)
            : (coverSizeRate < 1.7 && coverSizeRate > 0.7 || coverSizeRate == 0.7) ? imgPosition(12)
            : (coverSizeRate < 0.7 && coverSizeRate > 0.65 || coverSizeRate == 0.65) ? imgPosition(0)
                : imgPosition(-0.5);
    }

    // å°é¢å›¾ç‰‡å¯¹è§†é¢‘æ§åˆ¶
    function imgPosition(topData) {
        $("#vSource").css({
            "position": "absolute",
            "top": topData + "%",
            "margin-top": 0
        })
    }

    // è·å–å›¾ç‰‡åŸå§‹å¤§å°
    function getImgNaturalDimensions(img) {
        var nWidth, nHeight;
        if (img.naturalWidth) { // ç°ä»£æµè§ˆå™¨
            nWidth = img.naturalWidth
            nHeight = img.naturalHeight
        }
        return [nWidth, nHeight]
    }


    // é¡µé¡¶å®šæ—¶ä¸‹æ‹‰åŠŸèƒ½
    function downloadBox() {
        setInterval(function () {
            $(".downloadDlg").removeClass("dis-no")
        }, 20000);
    }

    // è§†é¢‘æ’­æ”¾åŠŸèƒ½
    $(".video-player").click(function () {
        if ($("#playing").is(":hidden")) {
            $("#playing").show();
            $(".body-content video").trigger('pause');
            $(".video-mask").show();

        } else {
            $("#playing").hide();
            compareImgSize();
            $(".video-mask").hide();
            $(".body-content .video-source").show();
            $(".body-content video").trigger("play");
            $("#vSource").removeClass("dis-no");
            $(".video-player").addClass("bg-transparent");
        }
    })


    $(".cover-btn").click(function () {

        $(".cover-btn").trigger('pause');
        $(this).parents().css(
            "background-image", "none",
        )
        console.log("adada");
        $(this).trigger('play');
    })

    // è§†é¢‘æ’­æ”¾ç›‘æµ‹
    function endPlay() {
        $("#playing").show();
        $(".body-content video").trigger('pause');
        $(".body-content .video-source").hide();
        $(".video-mask").show();
        $(".video-player").removeClass("bg-transparent");
        // console.log("æ’­æ”¾ç»“æŸï¼ï¼")

        $(".video-source").removeClass("pos-fix");
        $(".list-cover").removeClass("bgimg-no")
        
    }


    var i,
        indexImg,
        indexName,
        titles,
        lower = 1,
        upper = 12,
        nameArr = [
            "@é»‘å¦¹å„¿åˆ›ä½œçš„åŸå£°",
            "@ç‘çªç»„åˆï¼ˆğŸ”¥ğŸ”¥ğŸ”¥ï¼‰åˆ›ä½œçš„åŸå£°",
            "@ç›’å­æ—¥è®°åˆ›ä½œçš„åŸå£°",
            "Jingle Bells",
            "@é•¿å‘é£˜é£˜:ä¹”é‡‘å­åˆ›ä½œçš„åŸå£°",
            "è¯´çˆ±ä½ ",
            "å°å¤ªé˜³",
            "@å«æˆ‘é©¬å“ˆåˆ›ä½œçš„åŸå£°",
            "United State of Pop 2017 (How We Do It)",
            "@ç”Ÿåƒ»å­—ï¼ˆå‰ªè¾‘ç‰ˆï¼‰",
            "ç›®ä¸è½¬ç›ç»"
        ];

    // è·å–èŒƒå›´å†…éšæœºæ•°
    function random(lower, upper) {
        return Math.floor(Math.random() * (upper - lower)) + lower;
    }

    // éå†ç”Ÿæˆåˆ—è¡¨
    // for (i = 0; i < 4; i++) {
    //     indexImg = i;
    //     // indexImg = random(lower, upper);
    //     indexName = Math.floor((Math.random() * nameArr.length));
    //     titles = nameArr[indexName];
    //     $(".videos-box-list").append("<li>\n" +
    //         "                        <a href=\"###00\">\n" +
    //         "                            <div class=\"list-cover\" style=\"background-image: url(img/list-" + indexImg + ".jpg)\">\n" +
    //         "                                <div class=\"cover-mask\"></div>\n" +
    //         "                                <div class=\"cover-btn btn-"+indexImg+"\"></div>\n" +
    //         "                                <div class=\"cover-info\">\n" +
    //         "                                    <span class=\"info-icon\" style=\"background-image: url(img/icon-" + indexImg+ ".jpeg)\"></span>\n" +
    //         "                                    <span class=\"info-nickname\">" + titles + "</span>\n" +
    //         "                                </div>\n" +
    //         "                                <video class=\"video-source\" src=\"img/home-bg" + (i + 1) + ".mp4\" onended=\"endPlay()\">\n" +
    //         "\n" +
    //         "                                </video>\n" +
    //         "                            </div>\n" +
    //         "\n" +
    //         "                        </a>\n" +
    //         "                    </li>")

        // var faceBtn = '.btn-'+index;

        var vS= "#vSlide"+this.activeIndex;
        $(".btn-0").click(function(){
            swiper.slideTo(0, 1000, false);//åˆ‡æ¢åˆ°ç¬¬ä¸€ä¸ªslideï¼Œé€Ÿåº¦ä¸º1ç§’
            $(vS).trigger('play');
        })
        $(".btn-1").click(function(){
            swiper.slideTo(1, 1000, false);//åˆ‡æ¢åˆ°ç¬¬ä¸€ä¸ªslideï¼Œé€Ÿåº¦ä¸º1ç§’
            $(vS).trigger('play');
        })
        $(".btn-2").click(function(){
            swiper.slideTo(2, 1000, false);//åˆ‡æ¢åˆ°ç¬¬ä¸€ä¸ªslideï¼Œé€Ÿåº¦ä¸º1ç§’
            $(vS).trigger('play');
        })
        $(".btn-3").click(function(){
            swiper.slideTo(3, 1000, false);//åˆ‡æ¢åˆ°ç¬¬ä¸€ä¸ªslideï¼Œé€Ÿåº¦ä¸º1ç§’
            $(vS).trigger('play');
        })
    // }



</script>
</html>